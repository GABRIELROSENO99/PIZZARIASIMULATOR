<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizzaria Simulator - Deluxe Edition</title>
    <!-- Carrega o Tailwind CSS para estiliza√ß√£o r√°pida e responsiva --><script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define a fonte padr√£o Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Balsamiq+Sans:wght@400;700&display=swap');
        body {
            font-family: 'Balsamiq Sans', cursive; /* Fonte mais divertida */
            background-color: #fce4ec; /* Rosa claro, base da cor da pizza */
            overflow-x: hidden;
            background-image: url('https://www.transparenttextures.com/patterns/food.png'); /* Textura de fundo */
        }

        /* Estilo para a bancada (Pizza Canvas) */
        #pizza-workbench {
            width: 320px; /* Um pouco maior */
            height: 320px;
            border-radius: 50%;
            background-color: #f5deb3; /* Cor da massa clara */
            border: 15px solid #a0522d; /* Borda de casca mais grossa */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4), inset 0 0 20px rgba(255, 255, 255, 0.7);
            margin: 20px auto;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease-out; /* Transi√ß√£o mais suave */
            cursor: grabbing; /* Cursor de m√£o */
        }

        /* Camadas de ingrediente na pizza */
        .ingredient-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            opacity: 0.95; /* Menos opacidade para mostrar camadas */
            transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out;
            pointer-events: none; /* N√£o interfere nos cliques */
        }
        
        /* Estilos espec√≠ficos para a tela modal de fim de dia */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(5px); /* Efeito de blur no fundo */
        }

        .modal-content {
            background: #fff8e1;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            text-align: center;
            max-width: 90%;
            width: 500px; /* Um pouco maior */
            border: 5px solid #ff9800; /* Borda tem√°tica */
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        /* Estilo para a lista de pedidos */
        .order-card {
            background-color: #fff8e1; /* Mais claro */
            border: 2px solid #ffcc80; /* Borda mais suave */
            transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
        }
        
        .order-card-pending {
             border: 3px solid #64b5f6; /* Azul claro */
             background-color: #e3f2fd;
             box-shadow: 0 0 15px rgba(100, 181, 246, 0.6);
        }

        /* Estilo para os bot√µes de ingrediente */
        .ingredient-button {
            transition: transform 0.1s, box-shadow 0.1s, background-color 0.1s;
            border: 2px solid rgba(0,0,0,0.1);
        }
        .ingredient-button:hover {
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }
        .ingredient-button:active {
            transform: translateY(0) scale(0.97);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* Cores e estilos para os emojis de ingrediente */
        .emoji-layer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 80px; /* Emojis maiores */
            opacity: 0.9;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            pointer-events: none;
        }

        /* Classes para simular "textura" de ingrediente */
        .molho-base {
            background: radial-gradient(circle at 50% 50%, #FF4500 0%, #FF6347 70%, transparent 90%);
        }
        .queijo-base {
            background: radial-gradient(circle at 50% 50%, #FFD700 0%, #FFEB3B 70%, transparent 90%);
        }
        /* Para os outros ingredientes, usar emojis espalhados ou √≠cones */

        /* Estilo para scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #ffe0b2;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #ff9800;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #e68900;
        }
    </style>
</head>
<body class="p-4 bg-gray-50">

    <!-- HUD de Status --><div class="fixed top-0 left-0 right-0 p-4 bg-gradient-to-r from-red-600 to-amber-500 shadow-2xl z-50 rounded-b-3xl border-b-8 border-yellow-300">
        <div class="flex justify-between items-center max-w-7xl mx-auto">
            <div class="flex space-x-8">
                <div class="text-xl font-extrabold text-white drop-shadow-lg">Dia: <span id="day-display" class="text-yellow-200">1</span></div>
                <div class="text-xl font-extrabold text-white drop-shadow-lg">Caixa: <span id="cash-display" class="text-lime-300">R$ 0.00</span></div>
            </div>
            <div class="text-xl font-extrabold text-white drop-shadow-lg">
                Pizzas Feitas: <span id="pizzas-made" class="text-cyan-200">0</span> / <span id="daily-quota" class="text-cyan-200">25</span>
            </div>
        </div>
    </div>

    <!-- Layout Principal - Central e Bancada --><div class="max-w-7xl mx-auto mt-28 flex flex-col lg:flex-row gap-8">

        <!-- Coluna 1: Clientes e Pedidos (Fila) --><div class="lg:w-1/3 w-full bg-white p-6 rounded-3xl shadow-2xl border-4 border-blue-400 h-[650px] overflow-y-auto">
            <h2 class="text-3xl font-extrabold text-blue-800 mb-5 border-b-4 border-blue-200 pb-3 text-center bg-blue-50 p-3 rounded-t-xl sticky top-0 z-10 -mx-6 px-6">Clientes na Fila!</h2>
            <div id="orders-queue" class="space-y-6">
                <!-- Pedidos ser√£o inseridos aqui --></div>
        </div>

        <!-- Coluna 2: Bancada de Trabalho e Ingredientes --><div class="lg:w-1/3 w-full p-6 bg-white rounded-3xl shadow-2xl border-4 border-green-500">
            <h2 class="text-3xl font-extrabold text-green-800 mb-5 text-center">Sua Bancada de Pizza!</h2>

            <!-- Bancada da Pizza --><div id="pizza-workbench">
                <!-- Camadas de Ingredientes V√£o Aqui --><div id="current-pizza-layers"></div>
            </div>

            <div class="flex justify-center my-6 space-x-4">
                <button onclick="Game.checkPizza()" class="bg-gradient-to-r from-green-500 to-green-700 hover:from-green-600 hover:to-green-800 text-white font-extrabold py-3 px-8 rounded-full shadow-lg transition duration-200 transform hover:scale-105 active:scale-95">
                    <span class="text-2xl">üî•</span> Assar & Entregar
                </button>
                <button onclick="Game.resetPizza()" class="bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white font-extrabold py-3 px-8 rounded-full shadow-lg transition duration-200 transform hover:scale-105 active:scale-95">
                    <span class="text-2xl">üöÆ</span> Descartar
                </button>
            </div>

            <!-- Painel de Ingredientes --><h3 class="text-2xl font-extrabold text-gray-800 mt-8 mb-4 text-center border-t-2 border-gray-200 pt-4">Escolha seus Ingredientes</h3>
            <div id="ingredients-panel" class="grid grid-cols-4 gap-3">
                <!-- Bot√µes de Ingredientes Ser√£o Inseridos Aqui --></div>
        </div>

        <!-- Coluna 3: Cat√°logo de Pizzas (Flyer) --><div class="lg:w-1/3 w-full bg-gradient-to-br from-amber-100 to-yellow-200 p-6 rounded-3xl shadow-2xl border-4 border-amber-600 h-[650px] overflow-y-auto">
            <h2 class="text-3xl font-extrabold text-amber-900 mb-5 text-center bg-amber-200 p-3 rounded-t-xl sticky top-0 z-10 -mx-6 px-6">Nosso Menu Secreto!</h2>
            <p class="text-sm text-amber-800 mb-6 text-center italic font-semibold">Decore a ordem para ser o Mestre!</p>
            
            <div id="pizza-catalog-list" class="space-y-8">
                <!-- Cat√°logo de Pizzas (Receitas) --></div>
        </div>

    </div>

    <!-- Modal de Fim de Dia / Game Over --><div id="end-day-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 id="modal-title" class="text-5xl font-extrabold text-green-700 mb-5">Parab√©ns! Dia Conclu√≠do!</h2>
            
            <p class="text-2xl font-semibold text-gray-800 mb-3">Faturamento Bruto: <span id="modal-revenue" class="text-green-600">R$ 0.00</span></p>
            <p class="text-xl font-semibold text-gray-700 mb-4">Custo de Ingredientes (Aleat√≥rio): <span id="modal-cost" class="text-red-600">R$ 0.00</span></p>
            <hr class="my-5 border-t-2 border-gray-300">
            <p class="text-3xl font-extrabold text-gray-900 mb-7">LUCRO L√çQUIDO DO DIA: <span id="modal-profit" class="text-green-800">R$ 0.00</span></p>
            
            <p class="text-base text-gray-600 mb-5 italic" id="modal-status-message"></p>
            
            <button onclick="Game.startNewDay()" class="bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-extrabold py-4 px-10 rounded-full shadow-xl transition duration-200 transform hover:scale-105 active:scale-95 mt-6">
                Come√ßar Dia <span id="modal-next-day">2</span> <span class="text-2xl">‚òÄÔ∏è</span>
            </button>
        </div>
    </div>

    <!-- Modal de Pedido Falho / Erro --><div id="fail-modal" class="modal-overlay hidden">
        <div class="modal-content bg-red-50 border-red-500">
            <h2 class="text-5xl font-extrabold text-red-700 mb-5">Pedido Arruinado! üò†</h2>
            <p class="text-2xl font-semibold text-gray-800 mb-4">A pizza n√£o estava perfeita. Cliente insatisfeito.</p>
            <p class="text-xl text-gray-600 mb-6">"N√£o √© o que eu pedi!" üò°</p>
            <button onclick="document.getElementById('fail-modal').classList.add('hidden')" class="bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 text-white font-extrabold py-3 px-8 rounded-full shadow-xl transition duration-150 transform hover:scale-105 active:scale-95 mt-6">
                Entendido, Mestre!
            </button>
        </div>
    </div>
    
<script>
    // =========================================================
    // 1. DADOS E CONFIGURA√á√ïES DO JOGO
    // =========================================================

    const INGREDIENTS = {
        MOLHO: { id: 'MOLHO', name: "Molho Tomate", color: "red-600", emoji: "üçÖ" },
        QUEIJO: { id: 'QUEIJO', name: "Queijo Mussarela", color: "yellow-300", emoji: "üßÄ" },
        MANJERICAO: { id: 'MANJERICAO', name: "Manjeric√£o", color: "green-600", emoji: "üåø" },
        PEPPERONI: { id: 'PEPPERONI', name: "Pepperoni", color: "red-700", emoji: "ü•ì" },
        PRESUNTO: { id: 'PRESUNTO', name: "Presunto", color: "pink-300", emoji: "üçñ" },
        OVO: { id: 'OVO', name: "Ovo Cozido", color: "yellow-500", emoji: "ü•ö" },
        CEBOLA: { id: 'CEBOLA', name: "Cebola Roxa", color: "purple-400", emoji: "üßÖ" }
    };

    const PIZZA_CATALOG = [
        { name: "Margherita Cl√°ssica", price: 12.00, ingredients: [INGREDIENTS.MOLHO, INGREDIENTS.QUEIJO, INGREDIENTS.MANJERICAO] },
        { name: "Pepperoni Supremo", price: 15.00, ingredients: [INGREDIENTS.MOLHO, INGREDIENTS.QUEIJO, INGREDIENTS.PEPPERONI] },
        { name: "Presunto e Queijo", price: 13.50, ingredients: [INGREDIENTS.MOLHO, INGREDIENTS.QUEIJO, INGREDIENTS.PRESUNTO] },
        { name: "Portuguesa Completa", price: 18.00, ingredients: [INGREDIENTS.MOLHO, INGREDIENTS.QUEIJO, INGREDIENTS.PRESUNTO, INGREDIENTS.OVO, INGREDIENTS.CEBOLA] },
        { name: "Vegetariana Verde", price: 14.50, ingredients: [INGREDIENTS.MOLHO, INGREDIENTS.QUEIJO, INGREDIENTS.MANJERICAO, INGREDIENTS.CEBOLA] }
    ];

    // =========================================================
    // 2. L√ìGICA DO JOGO (OBJETO GLOBAL GAME)
    // =========================================================

    const Game = {
        cash: 0,
        day: 1,
        dailyRevenue: 0,
        dailyQuota: 25,
        pizzasMadeToday: 0,
        orders: [],
        currentPizza: [], // Ingredientes da pizza sendo montada (IDs)
        currentCustomer: null, // O cliente cujo pedido est√° ativo (primeiro da fila)

        // Fun√ß√£o para obter a cota de pizzas por dia
        getDailyQuota: (day) => {
            if (day <= 4) return 25;
            if (day <= 10) return 35;
            return 50;
        },

        // Fun√ß√£o para gerar um pedido do cliente
        generateOrder: () => {
            const rand = Math.random();
            let numPizzas = 1;
            // 70% 1 pizza, 20% 2 pizzas, 10% 3 pizzas
            if (rand > 0.70) {
                numPizzas = rand > 0.90 ? 3 : 2;
            }

            const customer = {
                id: Math.random().toString(36).substring(2, 9),
                name: `Cliente #${Math.floor(Math.random() * 900) + 100}`,
                pizzas: []
            };

            for (let i = 0; i < numPizzas; i++) {
                const recipe = PIZZA_CATALOG[Math.floor(Math.random() * PIZZA_CATALOG.length)];
                customer.pizzas.push({
                    recipe: recipe,
                    status: 'pending' // 'pending', 'completed', 'failed'
                });
            }
            return customer;
        },

        // Inicia o jogo ou um novo dia
        init: () => {
            // Se for a primeira inicializa√ß√£o, carrega o cat√°logo e ingredientes
            if (Game.day === 1 && Game.cash === 0) {
                Game.renderCatalog();
                Game.renderIngredientsPanel();
            }
            Game.dailyRevenue = 0;
            Game.pizzasMadeToday = 0;
            Game.dailyQuota = Game.getDailyQuota(Game.day);
            Game.orders = [];
            Game.currentPizza = [];
            Game.currentCustomer = null;
            
            // Cria os pedidos iniciais (de 2 a 4 clientes na fila)
            const initialCustomers = Math.floor(Math.random() * 3) + 2;
            for (let i = 0; i < initialCustomers; i++) {
                Game.orders.push(Game.generateOrder());
            }

            Game.renderHUD();
            Game.renderOrdersQueue();
            Game.resetPizza();
        },
        
        // Come√ßa um novo dia ap√≥s a conclus√£o do anterior
        startNewDay: () => {
            Game.day++;
            Game.init();
            document.getElementById('end-day-modal').classList.add('hidden');
        },

        // Adiciona um ingrediente √† pizza atual
        addIngredient: (ingredientId) => {
            const ingredient = Object.values(INGREDIENTS).find(i => i.id === ingredientId);
            if (!ingredient) return;

            Game.currentPizza.push(ingredientId);
            Game.renderPizzaWorkbench();
        },

        // Limpa a bancada
        resetPizza: () => {
            Game.currentPizza = [];
            Game.renderPizzaWorkbench();
            // Garante que o primeiro pedido pendente seja o focado
            Game.currentCustomer = Game.orders[0] || null;
            Game.renderOrdersQueue();
        },

        // Checa a pizza e finaliza o pedido
        checkPizza: () => {
            if (!Game.currentCustomer || Game.currentPizza.length === 0) {
                // Se n√£o h√° cliente ou pizza, apenas reseta
                return Game.resetPizza();
            }
            
            // Encontra a primeira pizza 'pending' do cliente ativo
            const activePizzaIndex = Game.currentCustomer.pizzas.findIndex(p => p.status === 'pending');
            if (activePizzaIndex === -1) {
                // N√£o deveria acontecer, mas se acontecer, reseta
                 return Game.resetPizza();
            }

            const activePizza = Game.currentCustomer.pizzas[activePizzaIndex];
            const requiredIngredients = activePizza.recipe.ingredients.map(i => i.id);

            // 1. Checa a quantidade de ingredientes
            if (Game.currentPizza.length !== requiredIngredients.length) {
                Game.handleOrderFailure("FALHA NA QUANTIDADE");
                return;
            }

            // 2. Checa a ordem e tipo de ingredientes (precis√£o total)
            const match = Game.currentPizza.every((id, index) => id === requiredIngredients[index]);

            if (match) {
                // SUCESSO!
                Game.handleOrderSuccess(activePizza, activePizzaIndex);
            } else {
                // FALHA!
                Game.handleOrderFailure("FALHA NA ORDEM/TIPO");
            }
        },
        
        // L√≥gica de sucesso do pedido
        handleOrderSuccess: (pizza, index) => {
            pizza.status = 'completed';
            
            Game.cash += pizza.recipe.price;
            Game.dailyRevenue += pizza.recipe.price;
            Game.pizzasMadeToday++;

            // Se o cliente terminou todos os pedidos
            const allCompleted = Game.currentCustomer.pizzas.every(p => p.status === 'completed');
            
            if (allCompleted) {
                // Remove o cliente da fila e gera um novo
                Game.orders.shift(); 
                Game.orders.push(Game.generateOrder());
                Game.resetPizza(); // Reseta e define o pr√≥ximo cliente ativo
            } else {
                // Se o cliente ainda tem pedidos, apenas reseta para a pr√≥xima pizza
                Game.resetPizza();
            }
            
            Game.renderHUD();
            Game.renderOrdersQueue();
            Game.checkDayEnd();
        },

        // L√≥gica de falha do pedido
        handleOrderFailure: (reason) => {
            // Remove o cliente insatisfeito e gera um novo
            Game.orders.shift();
            Game.orders.push(Game.generateOrder());
            Game.resetPizza();

            // Mostra o modal de falha
            document.getElementById('fail-modal').classList.remove('hidden');
            
            Game.renderOrdersQueue();
            Game.renderHUD();
        },

        // Verifica se o dia terminou
        checkDayEnd: () => {
            if (Game.pizzasMadeToday >= Game.dailyQuota) {
                Game.showEndDaySummary();
            } else if (Game.orders.length === 0 && Game.pizzasMadeToday < Game.dailyQuota) {
                 // Caso raro onde a fila zera antes da cota. Gera mais 2 pedidos
                 Game.orders.push(Game.generateOrder());
                 Game.orders.push(Game.generateOrder());
                 Game.renderOrdersQueue();
            }
        },

        // Mostra o resumo financeiro do dia
        showEndDaySummary: () => {
            // Custo aleat√≥rio entre 20% e 26%
            const costRate = Math.random() * (0.26 - 0.20) + 0.20;
            const cost = Game.dailyRevenue * costRate;
            const profit = Game.dailyRevenue - cost;
            
            Game.cash -= cost; // Deduz o custo do caixa
            
            // Renderiza o modal
            document.getElementById('modal-title').innerText = "Dia de Trabalho Conclu√≠do!";
            document.getElementById('modal-revenue').innerText = `R$ ${Game.dailyRevenue.toFixed(2)}`;
            document.getElementById('modal-cost').innerText = `R$ ${cost.toFixed(2)} (${(costRate * 100).toFixed(1)}%)`;
            document.getElementById('modal-profit').innerText = `R$ ${profit.toFixed(2)}`;
            document.getElementById('modal-next-day').innerText = Game.day + 1;
            
            let statusMessage = "Excelente trabalho! Voc√™ superou a cota e manteve a qualidade.";
            if (Game.pizzasMadeToday > Game.dailyQuota) {
                statusMessage = "Uau! Voc√™ excedeu a meta di√°ria! Seu lucro disparou.";
            } else if (profit <= 0) {
                statusMessage = "Cuidado! Apesar da cota, seus custos foram muito altos. O caixa est√° apertado.";
                document.getElementById('modal-title').classList.remove('text-green-700');
                document.getElementById('modal-title').classList.add('text-red-700');
            } else {
                 document.getElementById('modal-title').classList.remove('text-red-700');
                 document.getElementById('modal-title').classList.add('text-green-700');
            }
            document.getElementById('modal-status-message').innerText = statusMessage;

            document.getElementById('end-day-modal').classList.remove('hidden');
            Game.renderHUD();
        },

        // =========================================================
        // 3. FUN√á√ïES DE RENDERIZA√á√ÉO (DOM)
        // =========================================================

        renderHUD: () => {
            document.getElementById('day-display').innerText = Game.day;
            document.getElementById('cash-display').innerText = `R$ ${Game.cash.toFixed(2)}`;
            document.getElementById('pizzas-made').innerText = Game.pizzasMadeToday;
            document.getElementById('daily-quota').innerText = Game.dailyQuota;
        },

        renderIngredientsPanel: () => {
            const panel = document.getElementById('ingredients-panel');
            panel.innerHTML = '';
            
            Object.values(INGREDIENTS).forEach(ing => {
                const button = document.createElement('button');
                // Classes Tailwind para um visual mais divertido
                button.className = `ingredient-button bg-${ing.color} text-white font-extrabold py-3 px-1 rounded-lg shadow-md hover:shadow-xl transition duration-150 flex flex-col items-center justify-center text-sm transform hover:-translate-y-1`;
                button.onclick = () => Game.addIngredient(ing.id);
                button.innerHTML = `<span class="text-4xl leading-none mb-1">${ing.emoji}</span> <span class="mt-1">${ing.name.split(' ')[0]}</span>`; // Emoji maior
                panel.appendChild(button);
            });
        },

        renderCatalog: () => {
            const list = document.getElementById('pizza-catalog-list');
            list.innerHTML = '';

            PIZZA_CATALOG.forEach((pizza, index) => {
                const item = document.createElement('div');
                item.className = 'bg-white p-5 rounded-2xl shadow-lg border-l-8 border-amber-400 transform hover:scale-[1.02] transition duration-200 ease-out';
                
                const ingredientsList = pizza.ingredients.map((ing, i) => 
                    `<li class="flex items-center text-gray-700 text-lg"><span class="font-extrabold text-amber-700 mr-2">${i + 1}.</span> <span class="text-3xl mr-2">${ing.emoji}</span> ${ing.name}</li>`
                ).join('');

                item.innerHTML = `
                    <h4 class="text-2xl font-extrabold text-amber-800 mb-2">${pizza.name}</h4>
                    <p class="text-xl font-bold text-green-600 mb-3">Pre√ßo: R$ ${pizza.price.toFixed(2)}</p>
                    <p class="font-bold text-gray-700 mt-4 border-t pt-3">Ordem dos Ingredientes:</p>
                    <ul class="list-none space-y-2 text-lg pl-0 mt-2">
                        ${ingredientsList}
                    </ul>
                `;
                list.appendChild(item);
            });
        },

        renderOrdersQueue: () => {
            const queue = document.getElementById('orders-queue');
            queue.innerHTML = '';

            Game.orders.forEach((customer, custIndex) => {
                const isCurrentCustomer = custIndex === 0;
                const card = document.createElement('div');
                card.className = `order-card p-5 rounded-2xl shadow-lg ${isCurrentCustomer ? 'order-card-pending scale-100' : 'bg-gray-100 border-gray-300 scale-98 opacity-90'} transition-all duration-300 ease-out`;

                let orderHTML = `<h3 class="text-2xl font-extrabold text-blue-700 mb-4">${customer.name}</h3><ul class="space-y-3">`;
                let totalValue = 0;

                customer.pizzas.forEach((pizza, pizzaIndex) => {
                    const statusColor = 
                        pizza.status === 'completed' ? 'text-green-700' : 
                        pizza.status === 'pending' ? 'text-amber-600' : 'text-red-700';
                    const statusEmoji = 
                        pizza.status === 'completed' ? '‚úÖ' : 
                        pizza.status === 'pending' ? (isCurrentCustomer ? 'üëâ' : '‚è≥') : '‚ùå';
                    
                    totalValue += pizza.recipe.price;

                    orderHTML += `
                        <li class="p-3 rounded-lg ${pizza.status === 'completed' ? 'bg-green-100' : pizza.status === 'pending' && isCurrentCustomer ? 'bg-yellow-100' : 'bg-gray-50'} border border-dashed border-gray-300">
                            <span class="text-xl ${statusColor} font-bold">${statusEmoji} ${pizza.recipe.name}</span>
                            <span class="float-right text-xl font-extrabold text-gray-800">R$ ${pizza.recipe.price.toFixed(2)}</span>
                        </li>
                    `;
                });

                orderHTML += `</ul>
                    <div class="mt-5 pt-3 border-t-2 border-gray-200 font-extrabold text-xl flex justify-between">
                        <span>Valor Total do Pedido:</span>
                        <span class="text-green-800">R$ ${totalValue.toFixed(2)}</span>
                    </div>
                `;

                card.innerHTML = orderHTML;
                queue.appendChild(card);
            });
        },

        renderPizzaWorkbench: () => {
            const layersDiv = document.getElementById('current-pizza-layers');
            layersDiv.innerHTML = '';
            
            // Camadas para dar profundidade, desenhadas na ordem inversa
            // A massa da pizza √© o background da #pizza-workbench
            
            Game.currentPizza.reverse().forEach((id, index) => {
                const ingredient = Object.values(INGREDIENTS).find(i => i.id === id);
                if (!ingredient) return;

                const layer = document.createElement('div');
                layer.className = 'ingredient-layer';

                // Aplica a cor de fundo e um estilo de "cobertura"
                let visualStyle = '';
                let scale = 1.0 - (index * 0.05); // Camadas de baixo s√£o menores

                // Gradientes e texturas para simular os ingredientes de forma mais rica
                if (id === 'MOLHO') {
                    visualStyle = `background: radial-gradient(circle at 50% 50%, rgba(200, 0, 0, 0.9) 0%, rgba(255, 99, 71, 0.95) 70%, transparent 80%);`;
                } else if (id === 'QUEIJO') {
                    visualStyle = `background: radial-gradient(circle at 50% 50%, rgba(255, 223, 0, 0.85) 0%, rgba(255, 240, 0, 0.95) 70%, transparent 80%);`;
                } else {
                    // Para ingredientes "picados" ou em peda√ßos, usamos um padr√£o de emoji ou gradiente repetido
                    layer.classList.add('emoji-layer'); // Nova classe para emojis
                    layer.style.fontSize = `${(80 - index * 5)}px`; // Emojis menores nas camadas de baixo
                    layer.innerHTML = ingredient.emoji; // Adiciona o emoji como conte√∫do da camada
                    layer.style.opacity = 0.9 - (index * 0.1);
                    layer.style.zIndex = PIZZA_CATALOG.length - index; // Z-index para sobreposi√ß√£o
                }

                layer.style.cssText += visualStyle + `transform: scale(${scale});`;
                layersDiv.appendChild(layer);
            });

            // Reverte a lista para a ordem correta para o pr√≥ximo clique
            Game.currentPizza.reverse();
        }
    };

    // Inicializa o jogo ao carregar a p√°gina
    window.onload = () => {
        Game.init();
    };
</script>
</body>
</html>
